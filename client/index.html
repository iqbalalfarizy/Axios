<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Belajar Axios</title>
    
    <style>
        #wrap{
            background: black;
            color: white;
            font-size: 24px;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    
</head>
<body>
    <img src="D:/Prodemy/Javascript/images.jpeg" alt="panda">
    <div id="wrap">Belajar Axios</div>

    <button onclick="getUser()"> get user</button>
    <button onclick="addUser()"> add user</button>
    <button onclick="updateUser()"> update user</button>
    <button onclick="deleteUser()"> delete user</button>
    <button onclick="config()"> update user using config</button>
    <button onclick="getInstance()"> get user using instance</button>
        
    <script>
        // Get
         function getUser(){    
        axios.get("http://localhost:3000/users")
            .then((response)=>{
                console.log("ini responnya", response.data)
            })
            .catch((err)=>{
                console.log("ini errornya", err)
            })
            .finally(()=>{
                console.log("request selesai")
            })
        }


        // Post
        function addUser(){
            const newUser = {
                "name": "Safaf",
                "email": "siregar@gmail.com",
            }
            axios
                .post("http://localhost:3000/users", newUser)
                .then(({ data })=>console.log(data))
                .catch((err)=>console.log(err))
                .finally(()=>console.log('selesai'))
        }
        

        //Put --update
        function updateUser(){
            const update = {
                name : "Siregar1",
                email : "siregar1@gmail.com"
            }

            const userId1 = "8cec"

            axios
                .put(`http://localhost:3000/users/${userId1}`, update)
                .then(({ data })=>console.log(data))
                .catch((err)=>console.log(err))
                .finally(()=>console.log('selesai'))
        }
        

        //delete
        function deleteUser(){
            const userId = "8cec"
            axios
                .delete(`http://localhost:3000/users/${userId}`)
                .then(({ data })=>console.log(data)) 
                .catch((err)=>console.log(err))
                .finally(()=>console.log('selesai'))
        }

        
        //axios config
        function config(){
            const userId2 = "1236"
            axios({
            method : "PUT",
            url : `http://localhost:3000/users/${userId2}`,
            data :{
                name : "iqbal al",
                email: "asnfaskn@email.com"
            }
        })
            .then(({ data })=>console.log(data))
            .catch((err)=>console.log(err))
            .finally(()=>console.log('selesai'))
        }

        
        //axios instance
        
        function getInstance(){
            const myInstance = axios.create({
            baseURL : "http://localhost:3000"
        })

        myInstance
            .get("/users")
            .then((response)=>{
                console.log("ini responnya", response.data)
            })
            .catch((err)=>{
                console.log("ini errornya", err)
            })
            .finally(()=>{
                console.log("request selesai")
            })
        }
        
        
        
        
        
    </script>

  
</body>
</html>